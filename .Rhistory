labels = c("0","100","200","300"))+
coord_cartesian(ylim=c(-38,300),
xlim=c(.5,4.5),
expand = F)+
geom_image(inherit.aes=F,aes(x=reorder(type,num),
y=c(-16,-17,-22,-16.5),
image=image),
size=c(.17,.15,.22,.16)) +
geom_hline(yintercept = -34)
spouts
joined %>%
group_by(type,image,type) %>%
summarise(num = n())
# sort by type
# cal, other, shield, strato
spouts <- joined %>%
group_by(type,image,type) %>%
summarise(num = n()) %>%
ggplot(aes(x=reorder(type,num),y=num)) +
scale_y_continuous(breaks=c(0,100,200,300),
labels = c("0","100","200","300"))+
coord_cartesian(ylim=c(-38,300),
xlim=c(.5,4.5),
expand = F)+
geom_image(inherit.aes=F,aes(x=reorder(type,num),
y=c(-16,-17,-22,-16.5),
image=image),
size=c(.17,.15,.2,.16)) +
geom_hline(yintercept = -34)
spouts
# sort by type
# cal, other, shield, strato
spouts <- joined %>%
group_by(type,image,type) %>%
summarise(num = n()) %>%
ggplot(aes(x=reorder(type,num),y=num)) +
scale_y_continuous(breaks=c(0,100,200,300),
labels = c("0","100","200","300"))+
coord_cartesian(ylim=c(-38,300),
xlim=c(.5,4.5),
expand = F)+
geom_image(inherit.aes=F,aes(x=reorder(type,num),
y=c(-16,-17,-22,-16.5),
image=image),
size=c(.17,.15,.18,.16)) +
geom_hline(yintercept = -34)
spouts
# sort by type
# cal, other, shield, strato
spouts <- joined %>%
group_by(type,image,type) %>%
summarise(num = n()) %>%
ggplot(aes(x=reorder(type,num),y=num)) +
scale_y_continuous(breaks=c(0,100,200,300),
labels = c("0","100","200","300"))+
coord_cartesian(ylim=c(-38,300),
xlim=c(.5,4.5),
expand = F)+
geom_image(inherit.aes=F,aes(x=reorder(type,num),
y=c(-16,-17,-19,-16.5),
image=image),
size=c(.17,.15,.18,.16)) +
geom_hline(yintercept = -34)
spouts
# sort by type
# cal, other, shield, strato
spouts <- joined %>%
group_by(type,image,type) %>%
summarise(num = n()) %>%
ggplot(aes(x=reorder(type,num),y=num)) +
scale_y_continuous(breaks=c(0,100,200,300),
labels = c("0","100","200","300"))+
coord_cartesian(ylim=c(-38,300),
xlim=c(.5,4.5),
expand = F)+
geom_image(inherit.aes=F,aes(x=reorder(type,num),
y=c(-16,-17,-20,-16.5),
image=image),
size=c(.17,.15,.18,.16)) +
geom_hline(yintercept = -34)
spouts
# sort by type
# cal, other, shield, strato
spouts <- joined %>%
group_by(type,image,type) %>%
summarise(num = n()) %>%
ggplot(aes(x=reorder(type,num),y=num)) +
scale_y_continuous(breaks=c(0,100,200,300),
labels = c("0","100","200","300"))+
coord_cartesian(ylim=c(-38,300),
xlim=c(.5,4.5),
expand = F)+
geom_image(inherit.aes=F,aes(x=reorder(type,num),
y=c(-16,-17,-21,-16.5),
image=image),
size=c(.17,.15,.18,.16)) +
geom_hline(yintercept = -34)
spouts
# sort by type
# cal, other, shield, strato
spouts <- joined %>%
group_by(type,image,type) %>%
summarise(num = n()) %>%
ggplot(aes(x=reorder(type,num),y=num)) +
scale_y_continuous(breaks=c(0,100,200,300),
labels = c("0","100","200","300"))+
coord_cartesian(ylim=c(-38,300),
xlim=c(.5,4.5),
expand = F)+
geom_image(inherit.aes=F,aes(x=reorder(type,num),
y=c(-16.5,-17,-21,-16.5),
image=image),
size=c(.17,.15,.18,.16)) +
geom_hline(yintercept = -34)
spouts
# upload png images for volcano types
joined <- joined %>%
#mutate(image=here::here("data files","shield.svg"))
mutate(image = case_when(type == "Caldera" ~ here::here("data files","images","Caldera.png"),
type == "Shield" ~ here::here("data files","images","Shield.png"),
type == "Other" ~ here::here("data files","images","Other.png"),
type == "Stratovolcano" ~ here::here("data files","images","Strato.png")))
# make a list of 10 with most eruptions
top10 <- joined %>% arrange(desc(eruptions)) %>%head(10) %>% pull(volcano_name)
# add volcanoes to map
rofmap <- map +
# all volcanoes
geom_point(data=joined ,
inherit.aes = F,
aes(x=longfixed,
y=latitude),
size=1,
color=orangecol,
alpha=.85)+
#label top 10
geom_label_repel(data=(joined %>% filter(volcano_name %in% top10)),
inherit.aes = F,
aes(x=longfixed,
y=latitude,
label=volcano_name),
size=2.5,
force = 6,
alpha=.95,
fill = whitecol,
color=blackcol,
family="Montserrat Bold")+
# icon top 10
geom_image(data=(joined %>% filter(volcano_name %in% top10)),
inherit.aes = F,
aes(x=longfixed,
y=latitude,
image=image),
size=.045) +
# labs
labs(title="The Ring of Fire",
subtitle = "Pacfic Rim volcanoes with documented eruptions\nIcons denote 10 most active volcanoes",
caption = "Data: The Smithsonian Institution | Visualization: @Jake_Lawlor1")+
# theme stuff
theme(plot.title = element_text(family="Montserrat Black",
color=orangecol,
size=40,
hjust = 0,
margin = margin(5,0,9,0)),
plot.subtitle = element_text(family="Montserrat",
color=orangecol,
size=16,
hjust=0,
margin = margin(0,0,8,0)),
plot.caption = element_text(family="Montserrat",
color=whitecol,size=10))
rofmap
ggsave(here::here("output","May11.Volcano","map.png"),
dpi=600)
# upload ong volcano
img1 <- png::readPNG(here::here("data files","images","Strato_spew.png"))
fig1 <- rasterGrob(img1)
# sort by type
# cal, other, shield, strato
spouts <- joined %>%
group_by(type,image,type) %>%
summarise(num = n()) %>%
ggplot(aes(x=reorder(type,num),y=num)) +
scale_y_continuous(breaks=c(0,100,200,300),
labels = c("0","100","200","300"))+
coord_cartesian(ylim=c(-38,300),
xlim=c(.5,4.5),
expand = F)+
geom_image(inherit.aes=F,aes(x=reorder(type,num),
y=c(-16.5,-17,-21,-16.5),
image=image),
size=c(.17,.15,.18,.16)) +
geom_hline(yintercept = -34)
spouts
# sort by type
# cal, other, shield, strato
spouts <- joined %>%
group_by(type,image,type) %>%
summarise(num = n()) %>%
ggplot(aes(x=reorder(type,num),y=num)) +
scale_y_continuous(breaks=c(0,100,200,300),
labels = c("0","100","200","300"))+
coord_cartesian(ylim=c(-38,300),
xlim=c(.5,4.5),
expand = F)+
geom_image(inherit.aes=F,aes(x=reorder(type,num),
y=c(-16.5,-17,-22,-16.5),
image=image),
size=c(.17,.15,.18,.16)) +
geom_hline(yintercept = -34)
spouts
# sort by type
# cal, other, shield, strato
spouts <- joined %>%
group_by(type,image,type) %>%
summarise(num = n()) %>%
ggplot(aes(x=reorder(type,num),y=num)) +
scale_y_continuous(breaks=c(0,100,200,300),
labels = c("0","100","200","300"))+
coord_cartesian(ylim=c(-38,300),
xlim=c(.5,4.5),
expand = F)+
geom_image(inherit.aes=F,aes(x=reorder(type,num),
y=c(-16.5,-17,-22.5,-16.5),
image=image),
size=c(.17,.15,.18,.16)) +
geom_hline(yintercept = -34)
spouts
# sort by type
# cal, other, shield, strato
spouts <- joined %>%
group_by(type,image,type) %>%
summarise(num = n()) %>%
ggplot(aes(x=reorder(type,num),y=num)) +
scale_y_continuous(breaks=c(0,100,200,300),
labels = c("0","100","200","300"))+
coord_cartesian(ylim=c(-38,300),
xlim=c(.5,4.5),
expand = F)+
geom_image(inherit.aes=F,aes(x=reorder(type,num),
y=c(-16.5,-17,-22,-16.5),
image=image),
size=c(.17,.15,.17,.16)) +
geom_hline(yintercept = -34)
spouts
# sort by type
# cal, other, shield, strato
spouts <- joined %>%
group_by(type,image,type) %>%
summarise(num = n()) %>%
ggplot(aes(x=reorder(type,num),y=num)) +
scale_y_continuous(breaks=c(0,100,200,300),
labels = c("0","100","200","300"))+
coord_cartesian(ylim=c(-38,300),
xlim=c(.5,4.5),
expand = F)+
geom_image(inherit.aes=F,aes(x=reorder(type,num),
y=c(-16.5,-17,-22.5,-16.5),
image=image),
size=c(.17,.15,.17,.16)) +
geom_hline(yintercept = -34)
spouts
# sort by type
# cal, other, shield, strato
spouts <- joined %>%
group_by(type,image,type) %>%
summarise(num = n()) %>%
ggplot(aes(x=reorder(type,num),y=num)) +
scale_y_continuous(breaks=c(0,100,200,300),
labels = c("0","100","200","300"))+
coord_cartesian(ylim=c(-38,300),
xlim=c(.5,4.5),
expand = F)+
geom_image(inherit.aes=F,aes(x=reorder(type,num),
y=c(-16.5,-17,-23,-16.5),
image=image),
size=c(.17,.15,.17,.16)) +
geom_hline(yintercept = -34)
spouts
# sort by type
# cal, other, shield, strato
spouts <- joined %>%
group_by(type,image,type) %>%
summarise(num = n()) %>%
ggplot(aes(x=reorder(type,num),y=num)) +
scale_y_continuous(breaks=c(0,100,200,300),
labels = c("0","100","200","300"))+
coord_cartesian(ylim=c(-38,300),
xlim=c(.5,4.5),
expand = F)+
geom_image(inherit.aes=F,aes(x=reorder(type,num),
y=c(-16.5,-17,-22.5,-16.5),
image=image),
size=c(.17,.15,.17,.16)) +
geom_hline(yintercept = -34)
spouts
# sort by type
# cal, other, shield, strato
spouts <- joined %>%
group_by(type,image,type) %>%
summarise(num = n()) %>%
ggplot(aes(x=reorder(type,num),y=num)) +
scale_y_continuous(breaks=c(0,100,200,300),
labels = c("0","100","200","300"))+
coord_cartesian(ylim=c(-38,300),
xlim=c(.5,4.5),
expand = F)+
geom_image(inherit.aes=F,aes(x=reorder(type,num),
y=c(-16.5,-17,-22.5,-16.5),
image=image),
size=c(.17,.15,.17,.16)) +
#geom_hline(yintercept = -34)
geom_segment(aes(x=type,xend=type,y=c(1,2,-7,1),yend=num),
color=blackcol,size=1.5,
lineend="round")+
geom_segment(aes(x=type,xend=type,y=c(1,2,-7,1),yend=num),
color=redcol,size=1.25,
lineend="round")#+
spouts
# sort by type
# cal, other, shield, strato
spouts <- joined %>%
group_by(type,image,type) %>%
summarise(num = n()) %>%
ggplot(aes(x=reorder(type,num),y=num)) +
scale_y_continuous(breaks=c(0,100,200,300),
labels = c("0","100","200","300"))+
coord_cartesian(ylim=c(-38,300),
xlim=c(.5,4.5),
expand = F)+
geom_image(inherit.aes=F,aes(x=reorder(type,num),
y=c(-16.5,-17,-22.5,-16.5),
image=image),
size=c(.17,.15,.17,.16)) +
#geom_hline(yintercept = -34)
geom_segment(aes(x=type,xend=type,y=c(1,2,-7,1),yend=num),
color=blackcol,size=1.5,
lineend="round")+
geom_segment(aes(x=type,xend=type,y=c(1,2,-9,3),yend=num),
color=redcol,size=1.25,
lineend="round")#+
spouts
# sort by type
# cal, other, shield, strato
spouts <- joined %>%
group_by(type,image,type) %>%
summarise(num = n()) %>%
ggplot(aes(x=reorder(type,num),y=num)) +
scale_y_continuous(breaks=c(0,100,200,300),
labels = c("0","100","200","300"))+
coord_cartesian(ylim=c(-38,300),
xlim=c(.5,4.5),
expand = F)+
geom_image(inherit.aes=F,aes(x=reorder(type,num),
y=c(-16.5,-17,-22.5,-16.5),
image=image),
size=c(.17,.15,.17,.16)) +
#geom_hline(yintercept = -34)
geom_segment(aes(x=type,xend=type,y=c(1,2,-9,3),yend=num),
color=blackcol,size=1.5,
lineend="round")+
geom_segment(aes(x=type,xend=type,y=c(1,2,-9,3),yend=num),
color=redcol,size=1.25,
lineend="round")#+
spouts
# sort by type
# cal, other, shield, strato
spouts <- joined %>%
group_by(type,image,type) %>%
summarise(num = n()) %>%
ggplot(aes(x=reorder(type,num),y=num)) +
scale_y_continuous(breaks=c(0,100,200,300),
labels = c("0","100","200","300"))+
coord_cartesian(ylim=c(-38,300),
xlim=c(.5,4.5),
expand = F)+
geom_image(inherit.aes=F,aes(x=reorder(type,num),
y=c(-16.5,-17,-22.5,-16.5),
image=image),
size=c(.17,.15,.17,.16)) +
#geom_hline(yintercept = -34)
geom_segment(aes(x=type,xend=type,y=c(1,2,-9,3),yend=num),
color=blackcol,size=1.5,
lineend="round")+
geom_segment(aes(x=type,xend=type,y=c(1,2,-9,3),yend=num),
color=redcol,size=1.25,
lineend="round")+
geom_text(aes(label=type,x=type,y=num),nudge_y = 16,
color=whitecol,
alpha=.8,
family="Montserrat SemiBold",
size=2.75)+
theme_classic()  +
theme(axis.ticks.x = element_blank(),
axis.line.x = element_line(color=whitecol),
axis.title=element_blank(),
axis.text.x = element_blank(),
plot.background = element_rect(fill="transparent",color="transparent"),
panel.background = element_rect(fill="transparent",color="transparent",size=.3),
axis.line.y=element_line(color=whitecol),
axis.text.y = element_text(color=whitecol),
axis.ticks.y = element_line(color=whitecol))+
labs(title = "Volcanoes by Type") +
theme(plot.title = element_text(family="Montserrat SemiBold",color=orangecol,size=14))
#view
spouts
fullplot<-ggdraw() +
draw_plot(rofmap) +
draw_plot(spouts, x = 0.47, y = .1, width = .39, height = .39)+
draw_grob(fig1,x=.7,y=.89,width=.12,height=.1)+
draw_grob(fig1,x=.76,y=.89,width=.1,height=.08)
fullplot
# sort by type
# cal, other, shield, strato
spouts <- joined %>%
group_by(type,image,type) %>%
summarise(num = n()) %>%
ggplot(aes(x=reorder(type,num),y=num)) +
scale_y_continuous(breaks=c(0,100,200,300),
labels = c("0","100","200","300"))+
coord_cartesian(ylim=c(-38,300),
xlim=c(.5,4.5),
expand = F)+
geom_image(inherit.aes=F,aes(x=reorder(type,num),
y=c(-16.5,-17,-22.5,-16.5),
image=image),
size=c(.17,.15,.17,.16)) +
#geom_hline(yintercept = -34)
geom_segment(aes(x=type,xend=type,y=c(1,2,-8,4),yend=num),
color=blackcol,size=1.5,
lineend="round")+
geom_segment(aes(x=type,xend=type,y=c(1,2,-8,4),yend=num),
color=redcol,size=1.25,
lineend="round")#+
# sort by type
# cal, other, shield, strato
spouts <- joined %>%
group_by(type,image,type) %>%
summarise(num = n()) %>%
ggplot(aes(x=reorder(type,num),y=num)) +
scale_y_continuous(breaks=c(0,100,200,300),
labels = c("0","100","200","300"))+
coord_cartesian(ylim=c(-38,300),
xlim=c(.5,4.5),
expand = F)+
geom_image(inherit.aes=F,aes(x=reorder(type,num),
y=c(-16.5,-17,-22.5,-16.5),
image=image),
size=c(.17,.15,.17,.16)) +
#geom_hline(yintercept = -34)
geom_segment(aes(x=type,xend=type,y=c(1,2,-8,4),yend=num),
color=blackcol,size=1.5,
lineend="round")+
geom_segment(aes(x=type,xend=type,y=c(1,2,-8,4),yend=num),
color=redcol,size=1.25,
lineend="round")+
geom_text(aes(label=type,x=type,y=num),nudge_y = 16,
color=whitecol,
alpha=.8,
family="Montserrat SemiBold",
size=2.75)+
theme_classic()  +
theme(axis.ticks.x = element_blank(),
axis.line.x = element_line(color=whitecol),
axis.title=element_blank(),
axis.text.x = element_blank(),
plot.background = element_rect(fill="transparent",color="transparent"),
panel.background = element_rect(fill="transparent",color="transparent",size=.3),
axis.line.y=element_line(color=whitecol),
axis.text.y = element_text(color=whitecol),
axis.ticks.y = element_line(color=whitecol))+
labs(title = "Volcanoes by Type") +
theme(plot.title = element_text(family="Montserrat SemiBold",color=orangecol,size=14))
#view
spouts
fullplot<-ggdraw() +
draw_plot(rofmap) +
draw_plot(spouts, x = 0.47, y = .1, width = .39, height = .39)+
draw_grob(fig1,x=.7,y=.89,width=.12,height=.1)+
draw_grob(fig1,x=.76,y=.89,width=.1,height=.08)
fullplot
fullplot<-ggdraw() +
draw_plot(rofmap) +
draw_plot(spouts, x = 0.45, y = .1, width = .39, height = .39)+
draw_grob(fig1,x=.7,y=.89,width=.12,height=.1)+
draw_grob(fig1,x=.76,y=.89,width=.1,height=.08)
fullplot<-ggdraw() +
draw_plot(rofmap) +
draw_plot(spouts, x = 0.45, y = .1, width = .39, height = .39)+
draw_grob(fig1,x=.7,y=.87,width=.12,height=.1)+
draw_grob(fig1,x=.76,y=.87,width=.1,height=.08)
fullplot
fullplot<-ggdraw() +
draw_plot(rofmap) +
draw_plot(spouts, x = 0.45, y = .1, width = .39, height = .39)+
draw_grob(fig1,x=.7,y=.88,width=.12,height=.1)+
draw_grob(fig1,x=.76,y=.88,width=.1,height=.08)
fullplot
ggsave(filename = here::here("output","May11.Volcano","ROFmap2.png"),
dpi=500)
fullplot<-ggdraw() +
draw_plot(rofmap) +
draw_plot(spouts, x = 0.45, y = .1, width = .38, height = .37)+
draw_grob(fig1,x=.7,y=.88,width=.12,height=.1)+
draw_grob(fig1,x=.76,y=.88,width=.1,height=.08)
fullplot<-ggdraw() +
draw_plot(rofmap) +
draw_plot(spouts, x = 0.45, y = .1, width = .38, height = .37)+
draw_grob(fig1,x=.7,y=.87,width=.12,height=.1)+
draw_grob(fig1,x=.76,y=.87,width=.1,height=.08)
fullplot
ggsave(filename = here::here("output","May11.Volcano","ROFmap3.png"),
dpi=500)
